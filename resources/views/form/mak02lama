<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <style>
        * {
            box-sizing: border-box;
        }

        table {
            border-collapse:collapse;
            page-break-after: avoid;
            /* border-spacing: 0; */
        }

        .page-break {
            page-break-after: always;
        }

        .full {
            width: 100%;
        }

        .bold {
            font-weight: bold;
        }
        .text-center{
            text-align: center;
        }
        .text-left{
            text-align: left;
        }
        .text-blue{
            /* color: #0070c0; */
        }

        h3, td, ol, th, p {
            font-family: Calibri;
        }

        .unicode {
            font-family: DejaVu Sans;
        }

        th, td {
            padding: 5px;
            /* border: 1px solid #000; */
        }
        .f14 {
            font-size: 14pt;
        }
        .f12 {
            font-size: 12pt;
        }
        .f11 {
            font-size: 11pt;
        }
        .f10 {
            font-size: 10pt;
        }
        .f9 {
            font-size: 9pt;
        }

        .back-color-grey {
            background-color: #d9d9d9;
        }

        .header {
            position: fixed;
        }

        @page {
            /* margin-top: 1cm;
            margin-left: 1.54cm;
            margin-right: 1.54cm;
            margin-bottom: 1cm; */
            margin: 1.54cm;
            size: A4;
        }

        html, body {
            /* width: 210mm; */
            /* height: 297mm; */
        }

        .img-responsive {
            max-width: 100%;
            height: auto;
        }

        .bl {
            border-left: 1px solid #000;
        }

        .br {
            border-right: 1px solid #000;
        }

        .bt {
            border-top: 1px solid #000;
        }

        .bb {
            border-bottom: 1px solid #000;
        }
    </style>
</head>
<body>

{{-- <div class="header">
    <img src="{{ asset($logo->value) }}" width="45" height="45">
</div> --}}

<h3 class="f14 bold">FR-MAK- 04 : KEPUTUSAN DAN UMPAN BALIK ASESMEN</h3>

<table class="full" border="1">
    <tr>
        <td class="bold">Skema Sertifikasi</td>
        <td class="text-center">:</td>
        <td class="text-blue bold">{{ $uji->getSkema(false)->nama }}</td>
    </tr>
    <tr>
        <td class="bold">Nomor Skema Sertifikasi</td>
        <td class="text-center">:</td>
        <td class="text-blue bold">{{ $uji->getSkema(false)->kode }}</td>
    </tr>
</table>

<br>

<table class="full" border="0">
    <tr>
        <td class="bl bt bb">Nama Peserta</td>
        <td class="text-center bt bb">:</td>
        <td class="bold bt bb">{{ $uji->getMahasiswa(false)->nama }}</td>
        <td class="bl bt bb">Tanggal/Waktu</td>
        <td class="text-center bt bb">:</td>
        <td class="bold bt br bb">{{ formatDate($uji->updated_at) }}</td>
    </tr>
    <tr>
        <td class="bl bb">Tim Asesor</td>
        <td class="text-center bb">:</td>
        <td class="bold bb">
            @foreach($uji->getAsesorUji(false) as $asesor)
                {{ $asesor->nama }}<br>
            @endforeach
        </td>
        <td class="bb bl">Tempat</td>
        <td class="text-center bb">:</td>
        <td class="bold bb br">{{ $uji->getSkema(false)->getTempatUji(false)->nama }}</td>
    </tr>
</table>

<h3 class="bold">Penjelasan untuk Asesor :</h3>
<ol class="f10" style="margin-left: -20px; margin-top: -20px">
    <li>Asesor mengorganisasikan pelaksanaan asesmen berdasarkan metoda dan instrumen/sumber-sumber asesmen seperti yang
        tercantum dalam perencanaan asesmen.
    </li>
    <li>Asesor melaksanakan kegiatan pengumpulan bukti serta mendokumentasikan seluruh bukti pendukung yang dapat
        ditunjukkan oleh Asesi sesuai dengan kriteria unjuk kerja yang dipersyaratkan.
    </li>
    <li>Asesor membuat keputusan apakah Asesi sudah Kompeten <b>(K)</b>, Belum kompeten <b>(BK)</b> atau Asesmen Lanjut
        <b>(AL)</b>, untuk setiap kriteria unjuk kerja berdasarkan bukti-bukti.
    </li>
    <li>Asesor memberikan umpan balik kepada Asesi mengenai pencapaian unjuk kerja dan Asesi juga diminta untuk
        memberikan umpan balik terhadap proses asesmen yang dilaksanakan (kuesioner).
    </li>
    <li>Asesor dan Asesi bersama-sama menandatangani pelaksanaan asesmen.</li>
    <li>Kolom Jenis Bukti diisi dengan jenis bukti yang dipilih</li>
</ol>

<h3 class="bold">PENCAPAIAN KOMPETENSI:</h3>

@foreach($uji->getSkema(false)->getSkemaUnit(false) as $unit)
    <table class="full" border="1">
        <thead>
        <tr>
            <th width="30%" class="f11 text-left">Kode Unit Kompetensi</th>
            <th width="5%">:</th>
            <th width="65%" class="f11 text-left text-blue bold">{{ $unit->kode }}</th>
        </tr>
        <tr>
            <th width="30%" class="f11 text-left">Judul Unit Kompetensi</th>
            <th width="5%">:</th>
            <th width="65%" class="text-left text-blue">{{ $unit->nama }}</th>
        </tr>
        <tr>
            <th width="30%" class="f11 text-left">Elemen</th>
            <th width="5%">:</th>
            <th width="65%" class="text-left text-blue">1. {{ $unit->getElemenKompetensi()->first()->nama }}</th>
        </tr>
        </thead>
    </table>
    <table class="full" border="1" style="margin-top: -3px;">
        {{-- <thead> --}}
        @php $counterElemen = 1 @endphp
        @foreach($unit->getElemenKompetensi(false) as $elemen)
            @if($counterElemen != 1)
            <tr>
                <th colspan="8" class="f11 text-left bold text-blue">Elemen {{ $counterElemen }} : {{ $elemen->nama }}</th>
            </tr>
            @endif
            @if($counterElemen == 1)
            <tr>
                <th rowspan="2" width="5%" class="back-color-grey">No.</th>
                <th rowspan="2" width="45%" class="back-color-grey text-center">Kriteria Unjuk Kerja</th>
                <th colspan="3" class="f10 back-color-grey text-center" width="30%">Jenis Bukti</th>
                <th colspan="3" width="20%" class="f10 back-color-grey text-center">Keputusan</th>
            </tr>
            <tr class="text-center">
                <th class="f9 back-color-grey" width="10%">
                    Bukti<br>Langsung
                </th>
                <th class="f9 back-color-grey" width="10%">
                    Bukti Tidak<br>Langsung
                </th>
                <th class="f9 back-color-grey" width="10%">
                    Bukti<br>Tambahan
                </th>
                <th class="f10 back-color-grey" width="6.666666667%">
                    K
                </th>
                <th class="f10 back-color-grey" width="6.666666667%">
                    BK
                </th>
                <th class="f10 back-color-grey" width="6.666666667%">
                    AL
                </th>
            </tr>
            @endif
        {{-- </thead>

        <tbody> --}}
            @php $counterKriteria = 1 @endphp
            @foreach($elemen->getKriteria(false) as $kriteria)
                @php $penilaian = $uji->getPenilaian()->where('id', $kriteria->id)->first() @endphp
                <tr class="text-center">
                    <td style="text-align: left">
                        {{ $counterElemen }}.{{ $counterKriteria++ }}.
                    </td>
                    <td class="f11 text-left text-blue" style="text-align: left">
                        {{ $kriteria->unjuk_kerja }}
                    </td>
                    <td>
                        <b class="unicode">{!! $penilaian->pivot->bukti == \App\Support\Penilaian::BUKTI_LANGSUNG ? '&#10003;' : '' !!}</b>
                    </td>
                    <td>
                        <b class="unicode">{!! $penilaian->pivot->bukti == \App\Support\Penilaian::BUKTI_TIDAK_LANGSUNG ? '&#10003;' : '' !!}</b>
                    </td>
                    <td>
                        <b class="unicode">{!! $penilaian->pivot->bukti == \App\Support\Penilaian::BUKTI_TAMBAHAN ? 'âœ“' : '' !!}</b>
                    </td>
                    <td>
                        <b class="unicode">{!! $penilaian->pivot->nilai == \App\Support\Penilaian::KOMPETEN ? '&#10003;' : '' !!}</b>
                    </td>
                    <td>
                        <b class="unicode">{!! $penilaian->pivot->nilai == \App\Support\Penilaian::BELUM_KOMPETEN ? '&#10003;' : '' !!}</b>
                    </td>
                    <td>
                        <b class="unicode">{!! $penilaian->pivot->nilai == \App\Support\Penilaian::ASESMEN_LANJUT ? '&#10003;' : '' !!}</b>
                    </td>
                </tr>
            @endforeach
        {{-- </tbody> --}}
            @php $counterElemen++ @endphp
        @endforeach
    </table>
    <br>
    <div class="page-break"></div>
@endforeach

<table class="full" border="1">
    <tr>
        <td>
            <p class="bold f11">Umpan balik terhadap pencapaian unjuk kerja :</p>
            {{ $uji->umpan_balik }}
        </td>
    </tr>
    <tr>
        <td>
            <p class="bold f11">Identifikasi kesenjangan pencapaian unjuk kerja :</p>
            {{ $uji->identifikasi_kesenjangan }}
        </td>
    </tr>
    <tr>
        <td>
            <p class="bold f11">Saran tindak lanjut hasil asesmen :</p>
            {{ $uji->saran_tindak_lanjut }}
        </td>
    </tr>
</table>

<br>

<table class="full" border="1">
    <tr>
        <td rowspan="{{ (($uji->getAsesorUji()->count() * 2) + 5) }}" width="50%">
            <p class="bold">Rekomendasi Asesor :</p>
            {{ $uji->rekomendasi_asesor }}
        </td>
        <td class="bold" colspan="2" width="50%">Asesor :</td>
    </tr>
    @foreach($uji->getAsesorUji(false) as $asesor)
        <tr>
            <td>Nama</td>
            <td>{{ $asesor->nama }}</td>
        </tr>
        <tr>
            <td>Tanda Tangan & Tanggal</td>
            <td class="text-center">
                <img width="50" src="{{ $asesor->pivot->ttd }}" class="img-responsive">
                <br>
                {{ formatDate($uji->updated_at) }}
            </td>
        </tr>
    @endforeach
    <tr>
        <td colspan="2" class="bold">Peserta</td>
    </tr>
    <tr>
        <td>Nama</td>
        <td>{{ $uji->getMahasiswa(false)->nama }}</td>
    </tr>
    <tr>
        <td>No. Reg.</td>
        <td>{{ $uji->nim }}</td>
    </tr>
    <tr>
        <td>Tanda Tangan & Tanggal</td>
        <td class="text-center">
            <img src="{{ $uji->ttd_peserta }}" class="img-responsive">
            <br>
            {{ formatDate($uji->updated_at) }}
        </td>
    </tr>
</table>
</body>